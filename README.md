## Учебная виртуальная машина (УВМ)

Проект реализует полный цикл работы с УВМ:

- ассемблер (`cmd/uvm-as`) читает JSON-представление программы и генерирует бинарный файл;
- интерпретатор (`cmd/uvm-run`) исполняет бинарный файл, ведёт объединённую память команд/данных и умеет сохранять дамп памяти в CSV.

### Формат ассемблера (JSON)

Программа — это список инструкций:

```json
{
  "instructions": [
    { "op": "LOAD_CONST", "args": { "value": 703 } },
    { "op": "LOAD_MEM",   "args": {} },
    { "op": "STORE_MEM",  "args": { "addr": 389 } },
    { "op": "NEG",        "args": {} }
  ]
}
```

Поддерживаемые опкоды:

- `LOAD_CONST` — A=5, поле `value` (0–4095) загружается в аккумулятор;
- `LOAD_MEM` — A=15, читает `Mem[ACC]` и возвращает в аккумулятор;
- `STORE_MEM` — A=14, поле `addr` (0–4095), сохраняет ACC в память по адресу;
- `NEG` — A=3, унарный минус над аккумулятором.

### Ассемблирование

```bash
go run ./cmd/uvm-as --src prog.json --out prog.bin        # обычный режим
go run ./cmd/uvm-as --src prog.json --test                # печать IR и байтов
```

В тестовом режиме выводятся поля внутреннего представления и проверочные байтовые пары.

### Интерпретатор и дамп памяти

```bash
go run ./cmd/uvm-run prog.bin dump.csv 0 16
```

Интерпретатор загружает машинный код в память с адреса 0, выполняет программу и сохраняет CSV-дамп указанного диапазона адресов.

### Тест программы с унарным минусом (этап 4)

Файл `prog_neg.json` содержит программу:

1. `LOAD_CONST 21`
2. `NEG`
3. `STORE_MEM addr=128`

Сборка и исполнение:

```bash
go run ./cmd/uvm-as --src prog_neg.json --out neg.bin
go run ./cmd/uvm-run neg.bin neg.csv 120 135
```

В дампе по адресу `128` появится значение `-21`, что демонстрирует корректную работу АЛУ и команды унарного минуса.

